"use strict";(self.webpackChunkhydra_head_protocol_docs=self.webpackChunkhydra_head_protocol_docs||[]).push([[6217],{19257:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(67294),r=n(90814);const i={terminalWindow:"terminalWindow_wGrl",terminalWindowHeader:"terminalWindowHeader_o9Cs",terminalWindowBody:"terminalWindowBody_tzdS",row:"row_Rn7G",buttons:"buttons_IGLB",right:"right_fWp9",dot:"dot_fGZE"};function o(e){let{children:t,minHeight:n}=e;const o="string"==typeof t?a.createElement(r.Z,null,t):t;return a.createElement("div",{className:i.terminalWindow,style:{minHeight:n}},a.createElement("div",{className:i.terminalWindowHeader},a.createElement("div",{className:i.buttons},a.createElement("span",{className:i.dot,style:{background:"#f25f58"}}),a.createElement("span",{className:i.dot,style:{background:"#fbbe3c"}}),a.createElement("span",{className:i.dot,style:{background:"#58cb42"}}))),a.createElement("div",{className:i.terminalWindowBody},o))}},10535:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>d,toc:()=>l});var a=n(87462),r=(n(67294),n(3905)),i=n(19257);const o={sidebar_position:2},s="Via Docker",d={unversionedId:"getting-started/demo/with-docker",id:"getting-started/demo/with-docker",title:"Via Docker",description:"Nous utiliserons Docker et compose pour cette d\xe9mo, assurez-vous de les avoir disponibles dans votre terminal de commandes. Si vous ne souhaitez pas utiliser ou installer Docker, vous pouvez directement vous rendre sur D\xe9mo: Sans Docker et mettre les mains dans le cambouis.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/getting-started/demo/with-docker.md",sourceDirName:"getting-started/demo",slug:"/getting-started/demo/with-docker",permalink:"/head-protocol/unstable/fr/docs/getting-started/demo/with-docker",draft:!1,editUrl:"https://github.com/input-output-hk/hydra/tree/master/docs/i18n/fr/docusaurus-plugin-content-docs/current/getting-started/demo/with-docker.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"defaultSidebar",previous:{title:"D\xe9mo",permalink:"/head-protocol/unstable/fr/docs/getting-started/demo/"},next:{title:"Without Docker",permalink:"/head-protocol/unstable/fr/docs/getting-started/demo/without-docker"}},u={},l=[{value:"Mise en place du r\xe9seau",id:"mise-en-place-du-r\xe9seau",level:2},{value:"G\xe9n\xe9rer des fonds",id:"g\xe9n\xe9rer-des-fonds",level:2},{value:"D\xe9marrage des n\u0153uds Hydra",id:"d\xe9marrage-des-n\u0153uds-hydra",level:2},{value:"Utiliser l&#39;interface client",id:"utiliser-linterface-client",level:2}],c={toc:l},p="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"via-docker"},"Via Docker"),(0,r.kt)("p",null,"Nous utiliserons ",(0,r.kt)("a",{parentName:"p",href:"https://www.docker.com/get-started"},"Docker")," et ",(0,r.kt)("a",{parentName:"p",href:"https://www.docker.com/get-started"},"compose")," pour cette d\xe9mo, assurez-vous de les avoir disponibles dans votre terminal de commandes. Si vous ne souhaitez pas utiliser ou installer Docker, vous pouvez directement vous rendre sur ",(0,r.kt)("a",{parentName:"p",href:"/docs/getting-started/demo/without-docker"},"D\xe9mo: Sans Docker")," et mettre les mains dans le cambouis."),(0,r.kt)("admonition",{title:"Shortcut",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Toutes ces \xe9tapes sont combin\xe9es dans un unique script ",(0,r.kt)("inlineCode",{parentName:"p"},"./run-docker.sh"),". Ce script contient aussi quelques petites v\xe9rifications pour \xe9viter de vous tirer une balle dans le pied avec certaines commandes. ")),(0,r.kt)("admonition",{title:"Contexte",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Toutes les commandes ci-dessous supposent qu'elles sont \xe9xecut\xe9es depuis le dossier ",(0,r.kt)("inlineCode",{parentName:"p"},"demo/"),", \xe0 la racine du d\xe9p\xf4t. Vous aurez donc besoin de cloner le d\xe9p\xf4t et de ",(0,r.kt)("inlineCode",{parentName:"p"},"cd demo")," avant d'aller plus loin.")),(0,r.kt)("admonition",{title:"(in)compatibilit\xe9 du syst\xe8me d'exploitation",type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Les instructions fournies ci-apr\xe8s ont \xe9t\xe9 test\xe9es pour des environnements Linux r\xe9cents (Ubuntu, ArchLinux, NixOS...). Si vous \xeates sur Windows ou MacOS vous aurez sans doute besoin d'ajuster certaines commandes li\xe9es aux ",(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/storage/volumes/"},"volumes"),".")),(0,r.kt)("h2",{id:"mise-en-place-du-r\xe9seau"},"Mise en place du r\xe9seau"),(0,r.kt)("p",null,"Pour commencer, r\xe9cup\xe9rez les images des diff\xe9rents services d\xe9finis dans le fichier compose:"),(0,r.kt)(i.Z,{mdxType:"TerminalWindow"},"docker-compose --profile tui --profile hydra-node pull"),(0,r.kt)("p",null,"Ensuite, vous pouvez ex\xe9cuter le script ",(0,r.kt)("inlineCode",{parentName:"p"},"./prepare-devnet.sh")," pour cr\xe9er les fichiers n\xe9cessaires \xe0 la configuration du r\xe9seau local (a.k.a devnet). Le script g\xe9n\xe8re une configuration ",(0,r.kt)("em",{parentName:"p"},"genesis")," Cardano (qui fixe les param\xe8tres du protocole). Notez que dans le cadre de cette d\xe9mo, la configuration du r\xe9seau n'utilise pas de ",(0,r.kt)("em",{parentName:"p"},"stake pool")," et ne requiert qu'un unique noeud pour fonctionner."),(0,r.kt)(i.Z,{mdxType:"TerminalWindow"},"./prepare-devnet.sh"),(0,r.kt)("p",null,"C'est tout. Il est maintenant possible de d\xe9marrer le cardano node via:"),(0,r.kt)(i.Z,{mdxType:"TerminalWindow"},"docker-compose up -d cardano-node"),(0,r.kt)("admonition",{title:"Avertissement!",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},'Le noeud Cardano cr\xe9e un "r\xe9seau" priv\xe9 et local qui d\xe9marre depuis un bloc ',(0,r.kt)("em",{parentName:"p"},"genesis"),". Pour d\xe9marrer, la configuration du noeud doit \xeatre \xe0 jour (comprendre, r\xe9cente). Si au d\xe9marrage, le noeud Cardano retourne ",(0,r.kt)("inlineCode",{parentName:"p"},"TraceNoLedgerView"),", alors c'est que l'heure de d\xe9marrage indiqu\xe9e dans la configuration g\xe9n\xe9sis est trop loin dans le pass\xe9: il faut en ce cas g\xe9n\xe9rer la configuration \xe0 nouveau via ",(0,r.kt)("inlineCode",{parentName:"p"},"prepare-devnet.sh"),".")),(0,r.kt)("h2",{id:"g\xe9n\xe9rer-des-fonds"},"G\xe9n\xe9rer des fonds"),(0,r.kt)("p",null,'En l\'\xe9tat actuel, les noeuds Hydra requi\xe8rent des UTxO dans une forme assez sp\xe9cifique afin de pouvoir payer les transactions n\xe9cessaires au protocole (on appelle ces UTxO: "carburant"), ainsi que des fonds \xe0 consigner dans le contrat pour chaque participant. Parmi les fichiers, vous trouverez un script ',(0,r.kt)("inlineCode",{parentName:"p"},"./seed-devnet.sh")," qui s'occupe de g\xe9n\xe9rer ces UTxOs pour chaque participant en utilisant la ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-cli"),". "),(0,r.kt)(i.Z,{mdxType:"TerminalWindow"},"./seed-devnet.sh"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Les transactions g\xe9n\xe9r\xe9es par seed-devnet.sh n'ont rien de particulier, ce sont des transactions Cardano. Toutefois si vous deviez les g\xe9n\xe9rer vous-m\xeame, assurez vous qu'\xe0 chaque addresse g\xe9n\xe9r\xe9e \xe0 partir de la paire publique/priv\xe9e associ\xe9e \xe0 l'option ",(0,r.kt)("inlineCode",{parentName:"p"},"--cardano-signing-key")," de chaque participant soient envoy\xe9s deux UTxOs :"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Un UTxO simple, contenant des Ada ou actifs natifs;"),(0,r.kt)("li",{parentName:"ul"},"Un UTxO ne contenant que des Ada et avec le datum hash suivant: ",(0,r.kt)("inlineCode",{parentName:"li"},"a654fb60d21c1fed48db2c320aa6df9737ec0204c0ba53b9b94a09fb40e757f3"),' (ce datum identifie les UTxOs r\xe9serv\xe9s au "carburant").'))),(0,r.kt)("h2",{id:"d\xe9marrage-des-n\u0153uds-hydra"},"D\xe9marrage des n\u0153uds Hydra"),(0,r.kt)("p",null,"Enfin, maintenant que les pr\xe9parations en cha\xeene sont pr\xeates, nous pouvons mettre en place le r\xe9seau Hydra (c'est-\xe0-dire les trois n\u0153uds pour Alice, Bob et Carol) en ex\xe9cutant:"),(0,r.kt)(i.Z,{mdxType:"TerminalWindow"},"docker-compose --profile hydra-node up -d"),(0,r.kt)("h2",{id:"utiliser-linterface-client"},"Utiliser l'interface client"),(0,r.kt)("p",null,"\xc0 l'aide de compose, vous pouvez d\xe9marrer les interfaces clientes (a.k.a ",(0,r.kt)("inlineCode",{parentName:"p"},"hydra-tui"),") pour interagir avec chaque noeud Hydra. Le fichier compose contient d\xe9j\xe0 trois services pr\xe9-configur\xe9s: ",(0,r.kt)("inlineCode",{parentName:"p"},"hydra-tui-1"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"hydra-tui-2"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"hydra-tui-3"),". Pour d\xe9marrer le premier client, utilisez simplement:"),(0,r.kt)(i.Z,{mdxType:"TerminalWindow"},"docker-compose --profile tui run hydra-tui-1"),(0,r.kt)("p",null,"Cette commande lance une interface utilisateur dans le terminal, configur\xe9e avec les cl\xe9s du premier noeud (i.e. Alice). Dans d'autres terminaux, vous pouvez lancer de la m\xeame fa\xe7on ",(0,r.kt)("inlineCode",{parentName:"p"},"hydra-tui-2")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"hydra-tui-3"),"."))}m.isMDXComponent=!0}}]);